%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 
% maths.sty
% math style sheet
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% SETUP

\def\@version{1.0}
\def\@releasedate{2019/09/01}

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{maths}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                 PACKAGES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Importing Packages

% math packages
\usepackage{amsmath,amstext,amssymb}
\usepackage{gensymb}
\usepackage{textcomp} % for \textdegree

% for making commands
\usepackage{xparse}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                 SETTINGS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Implementing Package Settings


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                 COMMANDS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Defining Commands

% -----------------------------------------------------------------------------
%% Shortcuts

\newcommand{\rmn}[1]{{\mathrm{#1}}}  % mathrm
\newcommand{\itl}[1]{{\mathit{#1}}}  % mathit
\newcommand{\bld}[1]{{\mathbf{#1}}}  % mathbf

\newcommand{\lessim}{\lesssim}  % allow a 2-l version of lesssim


% -----------------------------------------------------------------------------
%% Code

% Useful for algorithms
\newcommand{\alg}[1]{\textsc{\bfseries \footnotesize {#1}}}


% -----------------------------------------------------------------------------
%% Derivatives

% differentials
\NewDocumentCommand \dif {o m} {
	\IfNoValueTF{#1}
		{ \mathrm{d}{#2} }
		{ \mathrm{d}^{#1}{#2} }
}
\NewDocumentCommand \pdif {o m} {
	\IfNoValueTF{#1}
		{ \partial{#2} }
		{ \partial^{#1}{#2} }
}

% derivative
\NewDocumentCommand \deriv {s O{x} o m} {
	% #1: star, optional change dydx to d/dx (y)
	% #2: with rspect to, optional default to x
	% #3: power of the derivative, optional
	% #4: the thing being differentiated
	\IfBooleanTF{#1}
		{% 
		 \IfNoValueTF{#3}
		 { \frac{\mathrm{d}}{\dif{#2}}({#4}) }
		 { \frac{\mathrm{d}^{#3}}{\dif{#2}^{#3}}({#4}) }
		}
		{%
		 \IfNoValueTF{#3}
		 { \frac{\mathrm{d}{#4}}{\dif{#2}} }
		 { \frac{\dif[{#3}]{#4}}{\dif{#2}^{#3}} }
		}
}

\NewDocumentCommand \pderiv {s O{x} o m} {
	% #1: star, optional change dydx to d/dx (y)
	% #2: with rspect to, optional default to x
	% #3: power of the derivative, optional
	% #4: the thing being differentiated
	\IfBooleanTF{#1}
		{% 
		 \IfNoValueTF{#3}
		 { \frac{\partial}{\pdif{#2}}({#4}) }
		 { \frac{\partial^{#3}}{\pdif{#2}^{#3}}({#4}) }
		}
		{%
		 \IfNoValueTF{#3}
		 { \frac{\partial{#4}}{\pdif{#2}} }
		 { \frac{\pdif[{#3}]{#4}}{\pdif{#2}^{#3}} }
		}
}


% -----------------------------------------------------------------------------
%% Integrals

\newcommand{\dx}{\mathrm{d}x}  % dx


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%